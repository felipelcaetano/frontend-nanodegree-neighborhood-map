function initMap(){activeInfowindow=new google.maps.InfoWindow;map=new google.maps.Map(document.getElementById("map"),{center:{lat:-23.55052,lng:-46.633309},zoom:10.7,styles:[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#fff"},{weight:6}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#e85113"}]},{featureType:"road.highway",elementType:"labels.icons",stylers:[{visibility:"off"}]}],mapTypeControl:!1}),locations=[{title:"Parque do Carmo",location:{lat:-23.581743,lng:-46.462333},id:"ChIJLV_w3EBmzpQR6vhaUW-n6oE",fS:{id:"4c922c4db641236ab9868779",address:"",likes:0}},{title:"Parque Ibirapuera",location:{lat:-23.584843,lng:-46.655913},id:"ChIJoyYcqfFZzpQRWi4itrx_1V8",fS:{id:"4b0588c7f964a520d9d922e3",address:"",likes:0}},{title:"Parque do Povo",location:{lat:-23.588037,lng:-46.68873},id:"ChIJubUPZ0BXzpQRACod7iNucDE",fS:{id:"4b23d4ddf964a520b75a24e3",address:"",likes:0}},{title:"Parque da Juventude",location:{lat:-23.5072,lng:-46.620408},id:"ChIJ7QRNOyf2zpQRCDpCF99XpJ4",fS:{id:"4ba6c93df964a520966f39e3",address:"",likes:0}},{title:"CERET",location:{lat:-23.556052,lng:-46.559332},id:"ChIJOUPLL4BezpQR9KUzQawAvpo",fS:{id:"4b8ae47bf964a5209a8732e3",address:"",likes:0}},{title:"Parque Villa-Lobos",location:{lat:-23.545783,lng:-46.720578},id:"ChIJfV4al_pWzpQR0a3ayQ6Oa28",fS:{id:"4d440dad14aa8cfaf0e1613d",address:"",likes:0}},{title:"Parque Piqueri",location:{lat:-23.529612,lng:-46.575581},id:"ChIJT4t6sd9ezpQRI3XzArVFOsg",fS:{id:"4c38b93d0a71c9b6412d41c9",address:"",likes:0}},{title:"Horto Florestal",location:{lat:-23.456003,lng:-46.629819},id:"ChIJZ-Ygoh33zpQRel7Y6UK0iF0",fS:{id:"4b284eb3f964a520529224e3",address:"",likes:0}}],locations.forEach(function(e,o){var a=e.location,t=e.title,i=e.id,n=new google.maps.Marker({map:map,position:a,title:t,icon:defaultIcon,animation:google.maps.Animation.DROP,id:i});markers.push(n),addMarkerListener(n)}),listLocations(),autocomplete()}var addMarkerListener=function(e){var o=new google.maps.InfoWindow;e.addListener("click",function(){resetMarkersIcons(),clearInfowindow(e),e.setIcon(hihgLightedIcon),activeMarker=e,populateInfoWindow(this,o)})};function clearInfowindow(e){activeInfowindow.close(),addMarkerListener(e)}function autocomplete(){var e=new google.maps.places.Autocomplete(document.getElementById("autocomplete-box"));e.addListener("place_changed",function(){resetMarkersIcons(),markers.forEach(function(e,o){clearInfowindow(e)}),$(".fa-angle-up").trigger("click");var o=e.getPlace(),a=!1,t=!1;if(o.types.forEach(function(e,o){"park"===e&&(a=!0)}),o.address_components.forEach(function(e,o){"São Paulo"!==e.long_name&&"São Paulo"!==e.short_name&&"SP"!==e.short_name||(t=!0)}),a&&t)if(o.geometry.viewport){map.fitBounds(o.geometry.viewport);var i=new google.maps.Marker({map:map,position:o.geometry.location,title:o.name,icon:hihgLightedIcon,animation:google.maps.Animation.DROP,id:o.place_id});markers.push(i),populateInfoWindow(i,new google.maps.InfoWindow),addMarkerListener(i)}else window.alert("Nao foi possivel encontrar detalhes deste endereco");else window.alert("Por favor, pesquise somente parques em Sao Paulo")})}function populateInfoWindow(e,o){o.marker!=e&&(o.marker=e,o.setContent('<div id="infowindow"><h1>'+e.title+'</h1><div id="infowindow-details" class="container"></div>'),new google.maps.places.PlacesService(map).getDetails({placeId:e.id},function(a,t){if("OK"===t){o.marker=e;var i="<div>";a.formatted_address&&(i+=a.formatted_address),a.opening_hours&&(i+="<br><br><h2>Horários:</h2>"+a.opening_hours.weekday_text[0]+"<br>"+a.opening_hours.weekday_text[1]+"<br>"+a.opening_hours.weekday_text[2]+"<br>"+a.opening_hours.weekday_text[3]+"<br>"+a.opening_hours.weekday_text[4]+"<br>"+a.opening_hours.weekday_text[5]+"<br>"+a.opening_hours.weekday_text[6]),a.photos&&(i+="<br><br>",i+='<img class="img-responsive" src="'+a.photos[0].getUrl({maxHeight:100,maxWidth:120})+'">',i+='<img class="img-responsive" src="'+a.photos[1].getUrl({maxHeight:100,maxWidth:120})+'">'),i+="</div></div>",o.setContent(o.content+i)}else o.setContent(o.content+"</div>")}),o.open(map,e),o.addListener("closeclick",function(){resetMarkersIcons(),o.marker=null}),activeInfowindow=o)}function resetMarkersIcons(){markers.forEach(function(e,o){e.setIcon(defaultIcon)})}function searchPark(e){var o=document.getElementById("autocomplete-box").value;e.getPlace();""==o?window.alert("Digite o nome do parque que procura"):(resetMarkersIcons(),markers.forEach(function(e,o){clearInfowindow(e)}))}