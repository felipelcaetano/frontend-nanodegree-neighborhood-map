function faAngleDownListener(){$(".fa-angle-down").click(function(){$(".fa-angle-down").addClass("fa-angle-up"),$(".fa-angle-down").removeClass("fa-angle-down"),faAngleUpListener()})}function faAngleUpListener(){$(".fa-angle-up").click(function(){$(".fa-angle-up").addClass("fa-angle-down"),$(".fa-angle-up").removeClass("fa-angle-up"),faAngleDownListener()})}function listLocations(){var e=$("#locations-list");locations.forEach(function(a,s){new google.maps.places.PlacesService(map).getDetails({placeId:a.id},function(s,i){"OK"===i?(e.append('<li class="list-group-item bg-success" data-id="'+a.id+'"> '),s.photos&&$("#locations-list li:last-of-type").append('<div class="row-fluid col-md-12 locations-list-li-div"><a href="#locations-list-div" data-toggle="collapse"><div class="col-6"><img class="img-responsive" src="'+s.photos[0].getUrl({maxHeight:100,maxWidth:100})+'" alt="foto do '+s.name+'"></div></a>'),s.formatted_address&&$("#locations-list li:last-of-type .locations-list-li-div").append('<a href="#locations-list-div" data-toggle="collapse"><div class="col-6 text-right float-right"><address>'+s.name+"</br>"+s.formatted_address+"</address></div></a></div>"),$("#locations-list li:last-of-type").append('<div class="col-12 fs-description-div"><a href="#locations-list-div" data-toggle="collapse"><p id="fs-description" class="col-12 float-left"><q></q></p></a>'+spinner+"</div>"),$("#locations-list li:last-of-type").append('<div class="fs-likes-div"><span class="far fa-thumbs-up float-left"></span><span class="likes float-left"></span><p id="likes-text" class="font-italic"> Pessoas curtiram via Foursquare</p>&reg<a id="fSUrl" href=" " target="_blank"><span class="fab fa-foursquare"></span></a></div>'),$("#locations-list li:last-of-type").after("</div></li>"),$("#locations-list li:last-of-type").click(function(){populateWindowByMarker(a)}),obterDadosFS(a)):(console.log("Erro Place Service:"),console.log(i),window.alert("Ocorreu um erro ao tentar obter as informações. Tente mais tarde."))})})}function populateWindowByMarker(e){null!=activeInfowindow.marker&&clearInfowindow(activeInfowindow.marker),resetMarkersIcons(),markers.forEach(function(a,s){if(a.id===e.id){var i=new google.maps.InfoWindow;a.setIcon(hihgLightedIcon),populateInfoWindow(a,i),map.setCenter(e.location)}}),faAngleUpListener()}function obterDadosFS(e){$.ajax({url:"https://api.foursquare.com/v2/venues/"+e.fS.id,method:"GET",data:{client_id:fsClientId,client_secret:fsClientSecret,v:"20182002"},success:function(a){e.fS.likes=a.response.venue.likes.count,null!=a.response.venue.name&&null!=a.response.venue.location.formattedAddress&&$('[data-id="'+e.id+'"] address').text(a.response.venue.name+" - "+a.response.venue.location.formattedAddress),null!=a.response.venue.likes.count&&a.response.venue.likes.count>0?$('[data-id="'+e.id+'"] .likes').text(a.response.venue.likes.count):$('[data-id="'+e.id+'"] .fs-likes-div').hide(),null!=a.response.venue.description?$('[data-id="'+e.id+'"] p q').text(a.response.venue.description):$('[data-id="'+e.id+'"] .fs-description-div').hide(),null!=a.response.venue.canonicalUrl&&$('[data-id="'+e.id+'"] #fSUrl').attr("href",a.response.venue.canonicalUrl)},error:function(a){$('[data-id="'+e.id+'"] .fs-likes-div').hide(),$('[data-id="'+e.id+'"] .fs-description-div').hide(),console.log("Code: "+a.responseJSON.meta.code+". Msg: "+a.responseJSON.meta.errorDetail)},complete:function(a){$('[data-id="'+e.id+'"] .fa-spinner').detach()}})}faAngleDownListener();